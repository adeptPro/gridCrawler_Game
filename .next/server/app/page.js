(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d}),r(908),r(1506),r(5866);var o=r(3191),i=r(8716),a=r(7922),n=r.n(a),s=r(5231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,908)),"C:\\Users\\astir\\Projects\\Grid50x50app\\gridGameDockerApp\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\Users\\astir\\Projects\\Grid50x50app\\gridGameDockerApp\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\astir\\Projects\\Grid50x50app\\gridGameDockerApp\\app\\page.tsx"],p="/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new o.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3578:(e,t,r)=>{Promise.resolve().then(r.bind(r,8743))},1330:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5303:()=>{},8743:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var o,i,a=r(326),n=r(7577);!function(e){e.BLANK="blank",e.SPEEDER="speeder",e.LAVA="lava",e.MUD="mud"}(o||(o={}));let s="blue",l={easy:{blankRatio:.8},medium:{blankRatio:.55},hell:{blankRatio:.3}},d={blank:{healthChange:0,movesChange:-1,color:"#DDDDDD",name:"Blank"},speeder:{healthChange:-5,movesChange:0,color:"#ADD8E6",name:"Speeder"},lava:{healthChange:-50,movesChange:-10,color:"#FF4500",name:"Lava"},mud:{healthChange:-10,movesChange:-5,color:"#A0522D",name:"Mud"}},c=(e,t)=>Math.floor(Math.random()*(t-e)+e),p=e=>{let t=[],r=["speeder","lava","mud"],o=l[e].blankRatio,i=(e=-1,t=-1)=>{let r,o;do switch(c(0,4)){case 0:o=0,r=c(0,25);break;case 1:o=24,r=c(0,25);break;case 2:r=0,o=c(0,25);break;default:r=24,o=c(0,25)}while(r===e&&o===t);return{x:r,z:o}},a=i(),n=i(a.x,a.z);for(let e=0;e<25;e++){t[e]=[];for(let i=0;i<25;i++){let s;s=e===a.x&&i===a.z||e===n.x&&i===n.z?"blank":Math.random()<o?"blank":r[Math.floor(Math.random()*r.length)],t[e][i]={id:`cell-${e}-${i}`,type:s,gridX:e,gridZ:i,x:(e-12.5+.5)*1,z:(i-12.5+.5)*1}}}return{grid:t,startCellIndices:a,endCellIndices:n}},m=({gridData:e,isFpsView:t,playerStartPos:r,startMarkerPos:o,endMarkerPos:i,gameId:l,currentGridIndices:c,visitedCellTrail:p})=>((0,n.useEffect)(()=>{let e=document.getElementById("player-sphere");e&&(e.setAttribute("position",r),e.components&&e.components["kinematic-body"]&&e.setAttribute("kinematic-body","velocity",{x:0,y:0,z:0}))},[r,l]),(0,n.useEffect)(()=>{let e=document.getElementById("fps-camera"),r=document.getElementById("fps-player-footprint");e&&e.sceneEl&&(e.setAttribute("look-controls","enabled",t.toString()),t?document.pointerLockElement!==e.sceneEl.canvas&&e.sceneEl.canvas.requestPointerLock():document.pointerLockElement===e.sceneEl.canvas&&document.exitPointerLock()),r&&r.setAttribute("visible",t.toString());let o=document.getElementById("camera-rig");o&&o.setAttribute("camera-controls","enabled",(!t).toString());let i=document.getElementById("player-sphere");i&&i.setAttribute("data-fps-view-active",t.toString())},[t]),(0,a.jsxs)("a-scene",{embedded:!0,physics:"driver: ammo; debug: false;",renderer:"colorManagement: true; physicallyCorrectLights: true;",children:[a.jsx("a-assets",{timeout:"10000"}),a.jsx("a-entity",{id:"camera-rig",position:"0 20 1.25",rotation:"-85 0 0","camera-controls":`enabled: ${(!t).toString()};`,children:a.jsx("a-camera",{id:"main-camera",active:!t,"wasd-controls":"enabled: false;","look-controls":"enabled: false;"})}),(0,a.jsxs)("a-sphere",{id:"player-sphere",position:`${r.x} ${r.y} ${r.z}`,radius:.35,color:s,material:`shader: standard; color: ${s}; emissive: ${s}; emissiveIntensity: 0.2; roughness: 0.4; metalness: 0.1`,shadow:"cast: true","kinematic-body":"type: kinematic; radius: 0.2975; height: 0.7; enableSlopes: false; gravity: 0;","arrow-controls":"speed: 2.8;",children:[a.jsx("a-camera",{id:"fps-camera",active:t,position:"0 0.175 0",rotation:"0 0 0","wasd-controls":"enabled: false;","look-controls":"pointerLockEnabled: true; magicWindowTrackingEnabled: false; enabled: false;"}),a.jsx("a-cylinder",{id:"fps-player-footprint",radius:.2975,height:"0.01",position:"0 -0.345 0",rotation:"0 0 0",material:"shader: flat; color: #0000AA; opacity: 0.5;",visible:"false"})]}),(0,a.jsxs)("a-entity",{id:"ground-direction-arrow",visible:"false",children:[a.jsx("a-box",{id:"arrow-shaft",color:"cyan",height:"0.02",width:"0.08",depth:"0.4",position:"0 0 -0.15",material:"shader: flat; opacity: 0.7;"}),a.jsx("a-cone",{id:"arrow-head",color:"cyan","radius-bottom":"0.12","radius-top":"0",height:"0.25",position:"0 0 -0.4",rotation:"-90 0 0",material:"shader: flat; opacity: 0.7;"})]}),a.jsx("a-box",{id:"border-top","static-body":!0,color:"#333333",height:.875,width:25.4,depth:.2,position:"0 0.4375 -12.6"}),a.jsx("a-box",{id:"border-bottom","static-body":!0,color:"#333333",height:.875,width:25.4,depth:.2,position:"0 0.4375 12.6"}),a.jsx("a-box",{id:"border-left","static-body":!0,color:"#333333",height:.875,width:.2,depth:25,position:"-12.6 0.4375 0"}),a.jsx("a-box",{id:"border-right","static-body":!0,color:"#333333",height:.875,width:.2,depth:25,position:"12.6 0.4375 0"}),(0,a.jsxs)("a-entity",{id:"start-marker",position:`${o.x} 0 ${o.z}`,children:[a.jsx("a-cylinder",{color:"#4CAF50",radius:.2,height:3,position:"0 1.5 0",material:"shader: standard; metalness: 0.2; roughness: 0.7;",shadow:"cast: true"}),a.jsx("a-text",{value:"START",align:"center",color:"#FFFFFF",width:"4",position:"0 2.4000000000000004 0","look-at":"[camera]",side:"double"})]}),(0,a.jsxs)("a-entity",{id:"end-marker",position:`${i.x} 0 ${i.z}`,children:[a.jsx("a-cylinder",{color:"#F44336",radius:.2,height:3,position:"0 1.5 0",material:"shader: standard; metalness: 0.2; roughness: 0.7;",shadow:"cast: true"}),a.jsx("a-text",{value:"END",align:"center",color:"#FFFFFF",width:"4",position:"0 2.4000000000000004 0","look-at":"[camera]",side:"double"})]}),a.jsx("a-sky",{color:"#C0E4F0"}),a.jsx("a-light",{type:"ambient",color:"#AAA"}),a.jsx("a-light",{type:"directional",color:"#FFF",intensity:"0.8",position:"-5 16 5","shadow-camera-automatic":"#player-sphere, .grid-cell, #ground-direction-arrow, #start-marker, #end-marker"}),a.jsx("a-light",{type:"directional",color:"#FFF",intensity:"0.4",position:"5 16 -5"}),e.flat().map(e=>{let t=d[e.type].color,r=1,n=`${e.gridX},${e.gridZ}`,s=e.gridX===Math.round(o.x/1+12.5-.5)&&e.gridZ===Math.round(o.z/1+12.5-.5),l=e.gridX===Math.round(i.x/1+12.5-.5)&&e.gridZ===Math.round(i.z/1+12.5-.5);return e.gridX!==c.x||e.gridZ!==c.z||s||l?!p.has(n)||s||l||(t="#32CD32",r=.6):(t="#FFFF99",r=.7),a.jsx("a-plane",{class:"grid-cell",position:`${e.x} 0 ${e.z}`,rotation:"-90 0 0",width:.98,height:.98,material:`shader: standard; color: ${t}; opacity: ${r}; roughness: 0.8;`,shadow:"receive: true"},e.id)})]},l)),u=({onToggleScreen:e,playerName:t,onPlayerNameChange:r,onLoadGame:o})=>{let[i,s]=(0,n.useState)(!1),[l,d]=(0,n.useState)(null),c=async()=>{if(!t.trim()){d({text:"Please enter a player name to load.",type:"error"}),setTimeout(()=>d(null),3e3);return}s(!0),d(null);let r=await o(t);r?r.playerName===t?(d({text:`Game for ${t} loaded successfully!`,type:"success"}),setTimeout(()=>{d(null),e()},1500)):(d({text:`Saved data for player '${r.playerName}' found, but you entered '${t}'. Starting new game.`,type:"error"}),setTimeout(()=>{d(null),e()},4e3)):(d({text:`No saved game found for ${t}. Starting new game.`,type:"error"}),setTimeout(()=>{d(null),e()},3e3)),s(!1)};return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#2c3e50",color:"white",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",textAlign:"center",padding:"20px"},children:[a.jsx("h1",{style:{fontSize:"clamp(2rem, 5vw, 3.5rem)",marginBottom:"25px"},children:"Grid Runner"}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{htmlFor:"playerNameInput",style:{marginRight:"10px",fontSize:"1.1rem"},children:"Player Name:"}),a.jsx("input",{type:"text",id:"playerNameInput",value:t,onChange:e=>r(e.target.value),style:{padding:"8px",fontSize:"1rem",borderRadius:"5px",border:"1px solid #ccc",color:"#000000"}})]}),(0,a.jsxs)("p",{style:{fontSize:"clamp(1rem, 2.5vw, 1.3rem)",marginBottom:"15px",lineHeight:"1.6"},children:[" ARROW KEYS: Move Player ",a.jsx("br",{})," WASD: Pan Camera | Z/X: Zoom Camera ",a.jsx("br",{})," C: Toggle Camera View (Bird's-Eye / FPS) ",a.jsx("br",{})," Reach the ",a.jsx("strong",{style:{color:"#F44336"},children:"END"})," marker from the ",a.jsx("strong",{style:{color:"#4CAF50"},children:"START"})," marker! "]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"20px"},children:[a.jsx("button",{onClick:e,style:{padding:"15px 35px",fontSize:"clamp(1.1rem, 2.8vw, 1.6rem)",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",boxShadow:"0 5px 15px rgba(0,0,0,0.25)",transition:"background-color 0.3s ease, transform 0.1s ease"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#2980b9",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#3498db",onMouseDown:e=>e.currentTarget.style.transform="scale(0.98)",onMouseUp:e=>e.currentTarget.style.transform="scale(1)",children:" Start New Game "}),(0,a.jsxs)("button",{onClick:c,disabled:i,style:{padding:"15px 35px",fontSize:"clamp(1.1rem, 2.8vw, 1.6rem)",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"10px",cursor:i?"not-allowed":"pointer",boxShadow:"0 5px 15px rgba(0,0,0,0.25)",transition:"background-color 0.3s ease",opacity:i?.7:1},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#229954",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#27ae60",children:[" ",i?"Loading...":"Load Game"," "]})]}),l&&a.jsx("div",{style:{marginTop:"15px",padding:"10px",borderRadius:"5px",backgroundColor:"error"===l.type?"rgba(255,0,0,0.7)":"rgba(0,255,0,0.7)",color:"white"},children:l.text}),a.jsx("p",{style:{marginTop:"30px",fontSize:"0.9rem",color:"#bdc3c7"},children:" (Or press Spacebar to Start/Exit) "})]})},h=({onToggleScreen:e,playerName:t,loadedGameState:r,clearLoadedGameState:o,savedGameStateFromApp:i,onSetSavedGameState:s})=>{let[l,c]=(0,n.useState)("medium"),[u,h]=(0,n.useState)(0),[x,g]=(0,n.useState)([]),[y,b]=(0,n.useState)({x:0,y:.35,z:0}),[f,w]=(0,n.useState)({x:0,z:0}),[v,k]=(0,n.useState)({x:0,z:0}),[A,S]=(0,n.useState)({x:0,z:0}),[E,C]=(0,n.useState)({x:0,z:0}),[j,z]=(0,n.useState)({x:0,z:0}),[F,P]=(0,n.useState)(new Set),[R,D]=(0,n.useState)(100),[T,M]=(0,n.useState)(200),[L,I]=(0,n.useState)(60),[G,B]=(0,n.useState)(!1),[V,$]=(0,n.useState)(!1),[K,Z]=(0,n.useState)(!1),[U,N]=(0,n.useState)("Game Started!"),[X,O]=(0,n.useState)(!1),[_,q]=(0,n.useState)(!1),[W,H]=(0,n.useState)(!1),[Y,J]=(0,n.useState)(!1),[Q,ee]=(0,n.useState)(null),[et,er]=(0,n.useState)({playerGridX:0,playerGridZ:0,fpsCamFwdX:0,fpsCamFwdZ:0,fpsCamYaw:0,arrowUpEffectX:0,arrowUpEffectZ:0,playerVelX:0,playerVelZ:0,playerPosX:0,playerPosZ:0}),eo=(0,n.useRef)(null),[ei,ea]=(0,n.useState)({playerName:t,difficulty:l,player:{gridX:0,gridZ:0,worldX:0,worldZ:0,health:100,moves:200},game:{timeLeft:60,isFpsView:!1,currentCellType:null,startCell:{x:0,z:0},endCell:{x:0,z:0},isOver:!1,hasWon:!1,timerGameOver:!1},gridData:[],visitedCellTrail:[]}),en=(0,n.useCallback)((e,t)=>{if(t)g(t.gridData),b({x:t.player.worldX,y:.35,z:t.player.worldZ}),w({x:(t.game.startCell.x-12.5+.5)*1,z:(t.game.startCell.z-12.5+.5)*1}),k({x:(t.game.endCell.x-12.5+.5)*1,z:(t.game.endCell.z-12.5+.5)*1}),S({x:t.player.gridX,z:t.player.gridZ}),C(t.game.startCell),z(t.game.endCell),P(new Set(t.visitedCellTrail||[])),D(t.player.health),M(t.player.moves),I(t.game.timeLeft),c(t.difficulty),O(t.game.isFpsView),N("Game Loaded!");else{let{grid:t,startCellIndices:r,endCellIndices:o}=p(e);g(t),b({x:(r.x-12.5+.5)*1,y:.35,z:(r.z-12.5+.5)*1}),w({x:(r.x-12.5+.5)*1,z:(r.z-12.5+.5)*1}),k({x:(o.x-12.5+.5)*1,z:(o.z-12.5+.5)*1}),S(r),C(r),z(o),P(new Set),D(100),M(200),I(60),O(!1),N("Game Reset! Good luck!"),H(!0),setTimeout(()=>{H(!1),setTimeout(()=>{H(!0),setTimeout(()=>{H(!1)},75)},75)},75)}B(!1),$(!1),Z(!1),h(e=>e+1);let r=document.getElementById("player-sphere");r&&r.setAttribute("arrow-controls","enabled",!0);let o=document.getElementById("camera-rig");o&&o.setAttribute("camera-controls","enabled",!0)},[]);(0,n.useEffect)(()=>{r?(en(r.difficulty,r),o()):en(l)},[l,en,r,o]),(0,n.useEffect)(()=>{if(G||K||V)return;if(L<=0){N("Time&apos;s Up! YOU LOSE!"),$(!0),B(!0);let e=document.getElementById("player-sphere");e&&e.setAttribute("arrow-controls","enabled",!1);let t=document.getElementById("camera-rig");t&&t.setAttribute("camera-controls","enabled",!1);let r=document.getElementById("fps-camera");r&&r.setAttribute("look-controls","enabled",!1),document.pointerLockElement&&document.exitPointerLock();return}let e=setInterval(()=>{I(e=>e-1)},1e3);return()=>clearInterval(e)},[L,G,K,V]),(0,n.useEffect)(()=>{if(G||K)return;let e=document.getElementById("player-sphere");if(!e)return;let t=setInterval(()=>{let t=e.getAttribute("position");if(!t)return;let r=Math.round(t.x/1+12.5-.5),o=Math.round(t.z/1+12.5-.5),i=Math.max(0,Math.min(24,r)),a=Math.max(0,Math.min(24,o));if(i!==A.x||a!==A.z){if(x[A.x]?.[A.z]){let e=`${A.x},${A.z}`,t=A.x===E.x&&A.z===E.z,r=A.x===j.x&&A.z===j.z;t||r||P(t=>new Set(t).add(e))}S({x:i,z:a});let t=x[i]?.[a];if(t){if(i===j.x&&a===j.z){Z(!0),B(!0),N("You Win! Congratulations!"),e.setAttribute("arrow-controls","enabled",!1);let t=document.getElementById("camera-rig");t&&t.setAttribute("camera-controls","enabled",!1);let r=document.getElementById("fps-camera");r&&r.setAttribute("look-controls","enabled",!1),document.pointerLockElement&&document.exitPointerLock();return}let r=d[t.type],o=R+r.healthChange,n=T+r.movesChange;D(o),M(n),r.healthChange<0&&(q(!0),setTimeout(()=>{q(!1),setTimeout(()=>{q(!0),setTimeout(()=>{q(!1)},75)},75)},75));let s=`Player on ${r.name}: Health ${r.healthChange>=0?"+":""}${r.healthChange}, Moves ${r.movesChange>=0?"+":""}${r.movesChange}.`;if(o<=0||n<=0){V||(s=o<=0?"Game Over: Health depleted!":"Game Over: Ran out of moves!",B(!0)),e.setAttribute("arrow-controls","enabled",!1);let t=document.getElementById("camera-rig");t&&t.setAttribute("camera-controls","enabled",!1);let r=document.getElementById("fps-camera");r&&r.setAttribute("look-controls","enabled",!1),document.pointerLockElement&&document.exitPointerLock()}G||K||V||N(s)}}},100);return()=>clearInterval(t)},[R,T,x,A,G,K,j,V,E]),(0,n.useEffect)(()=>{let e=e=>{G||K||("KeyC"===e.code&&O(e=>{let t=!e;return N(t?"Switched to FPS View.":"Switched to Bird&apos;s-Eye View."),t}),"KeyQ"===e.code&&J(e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[G,K]),(0,n.useEffect)(()=>{let e=document.getElementById("ground-direction-arrow"),r=document.getElementById("player-sphere");document.getElementById("fps-camera");let o=()=>{let i=0,a=0,n=0,s=0;if(r&&r.object3D){let e=r.object3D.position;i=parseFloat(e.x.toFixed(2)),a=parseFloat(e.z.toFixed(2));let t=r.components["kinematic-body"];t&&t.data.velocity&&(n=parseFloat(t.data.velocity.x.toFixed(2)),s=parseFloat(t.data.velocity.z.toFixed(2)))}let d=null;if(x.length>0&&x[A.x]&&x[A.x][A.z]&&(d=x[A.x][A.z].type),ea({playerName:t,difficulty:l,player:{gridX:A.x,gridZ:A.z,worldX:i,worldZ:a,health:R,moves:T},game:{timeLeft:L,isFpsView:X,currentCellType:d,startCell:E,endCell:j,isOver:G,hasWon:K,timerGameOver:V},gridData:x,visitedCellTrail:Array.from(F)}),!e){eo.current&&cancelAnimationFrame(eo.current);return}if(G||K){e.setAttribute("visible","false"),eo.current&&cancelAnimationFrame(eo.current);return}e.setAttribute("position",{x:i,y:.02,z:a});let c={playerGridX:A.x,playerGridZ:A.z,playerPosX:i,playerPosZ:a,playerVelX:n,playerVelZ:s};e.setAttribute("visible","true"),er(e=>({...e,...c})),X&&!(G||K)&&(eo.current=requestAnimationFrame(o))};return X&&!(G||K)?eo.current=requestAnimationFrame(o):(o(),eo.current&&(cancelAnimationFrame(eo.current),eo.current=null)),()=>{eo.current&&(cancelAnimationFrame(eo.current),eo.current=null)}},[A,X,G,K,x,t,l,R,T,L,j,V,E,F]),(0,n.useEffect)(()=>{let e=e=>{(G||K||V)&&("Enter"===e.code||"Space"===e.code)&&(e.preventDefault(),e.stopPropagation(),en(l))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[G,K,V,l,en]);let es=async()=>{ee(null);let e={playerName:t,difficulty:l,player:{gridX:A.x,gridZ:A.z,worldX:et.playerPosX,worldZ:et.playerPosZ,health:R,moves:T},game:{timeLeft:L,isFpsView:X,currentCellType:x[A.x]?.[A.z]?.type||null,startCell:E,endCell:j,isOver:G,hasWon:K,timerGameOver:V},gridData:x,visitedCellTrail:Array.from(F)};console.log("Attempting to save game state:",e);try{localStorage.setItem(`gameState_${t}`,JSON.stringify(e)),await new Promise(e=>setTimeout(e,700)),s(e),ee({text:"Game Saved Successfully!",type:"success"})}catch(e){console.error("Error saving game:",e),ee({text:"Error saving game. Please try again.",type:"error"})}setTimeout(()=>ee(null),3e3)};return(0,a.jsxs)("div",{style:{width:"100vw",height:"100vh",overflow:"hidden",backgroundColor:"#1A1A1A"},children:[_&&a.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 0, 0, 0.25)",zIndex:2e3,pointerEvents:"none"}}),W&&a.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 255, 0, 0.25)",zIndex:2e3,pointerEvents:"none"}}),(0,a.jsxs)("div",{style:{padding:"8px 15px",backgroundColor:"rgba(0,0,0,0.9)",color:"white",position:"fixed",top:0,left:0,right:0,zIndex:1e3,fontFamily:"'Consolas', 'Courier New', monospace",fontSize:"0.9em",display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center",marginBottom:"5px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{style:{marginRight:"10px"},children:[t||"Player",":"]}),(0,a.jsxs)("span",{children:["H: ",a.jsx("strong",{style:{color:_?"#FF4136":R<25?"#FF4136":R<50?"#FF851B":"#2ECC40"},children:R})]}),(0,a.jsxs)("span",{style:{marginLeft:"10px"},children:["M: ",a.jsx("strong",{style:{color:T<25?"#FF4136":T<50?"#FF851B":"#7FDBFF"},children:T})]}),(0,a.jsxs)("span",{style:{marginLeft:"10px"},children:["T: ",(0,a.jsxs)("strong",{style:{color:L<10?"#FF4136":L<30?"#FF851B":"#0074D9"},children:[L,"s"]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{htmlFor:"difficulty-select",style:{marginRight:"5px",fontSize:"0.9em"},children:"Difficulty:"}),(0,a.jsxs)("select",{id:"difficulty-select",value:l,onChange:e=>{c(e.target.value)},disabled:G||K||V,style:{marginRight:"10px",padding:"3px",fontSize:"0.9em",backgroundColor:"#555",color:"white",border:"1px solid #777",borderRadius:"3px"},children:[" ",a.jsx("option",{value:"easy",children:"Easy"})," ",a.jsx("option",{value:"medium",children:"Medium"})," ",a.jsx("option",{value:"hell",children:"Hell"})," "]}),(0,a.jsxs)("div",{style:{fontSize:"0.65em",marginRight:"10px",border:"1px solid #444",padding:"2px 4px",borderRadius:"3px",minWidth:"250px",textAlign:"left",lineHeight:"1.1"},children:["Dbg: Grid(",et.playerGridX,",",et.playerGridZ,") P(",et.playerPosX,",",et.playerPosZ,")",a.jsx("br",{}),"V(",et.playerVelX,",",et.playerVelZ,") CF(",et.fpsCamFwdX,",",et.fpsCamFwdZ,") CYaw:",et.fpsCamYaw,"\xb0",a.jsx("br",{}),"UpDir(",et.arrowUpEffectX,",",et.arrowUpEffectZ,")"]}),a.jsx("button",{onClick:es,disabled:G||K||V,style:{padding:"5px 10px",fontSize:"0.9em",cursor:G||K||V?"not-allowed":"pointer",backgroundColor:"#5cb85c",border:"1px solid #4cae4c",borderRadius:"4px",color:"white",opacity:G||K||V?.6:1,marginRight:"5px"},children:" Save "}),a.jsx("button",{onClick:()=>{i?(en(i.difficulty,i),ee({text:"Game loaded from last save point!",type:"success"})):ee({text:"No game saved in this session to load.",type:"error"}),setTimeout(()=>ee(null),3e3)},disabled:!i||G||K||V,style:{padding:"5px 10px",fontSize:"0.9em",cursor:!i||G||K||V?"not-allowed":"pointer",backgroundColor:"#f0ad4e",border:"1px solid #eea236",borderRadius:"4px",color:"white",opacity:!i||G||K||V?.6:1,marginRight:"5px"},children:" Load "}),a.jsx("button",{onClick:e,disabled:G||K||V,style:{padding:"5px 10px",fontSize:"0.9em",cursor:G||K||V?"not-allowed":"pointer",backgroundColor:"#333",border:"1px solid #555",borderRadius:"4px",color:"white",opacity:G||K||V?.6:1},children:" Exit "})]})]}),(0,a.jsxs)("div",{style:{fontSize:"0.85em",textAlign:"left",width:"100%",marginBottom:"5px"},children:[" Controls: [Arrows: Player] [WASD: Cam Pan] [Z/X: Cam Zoom] [C: Toggle View (",X?"FPS":"Bird&apos;s-Eye",")] [Q: Toggle GameState Debug] "]}),(0,a.jsxs)("div",{style:{fontSize:"0.8em",textAlign:"left",width:"100%",display:"flex",flexWrap:"wrap",alignItems:"center"},children:[" ",a.jsx("strong",{style:{marginRight:"5px"},children:"Legend: "})," ",Object.entries(d).map(([e,{name:t,color:r,healthChange:o,movesChange:i}])=>{let n=[];return 0!==o&&n.push(`H:${o}`),0!==i&&n.push(`M:${i}`),(0,a.jsxs)("span",{style:{marginRight:"10px",display:"inline-flex",alignItems:"center",whiteSpace:"nowrap"},children:[" ",a.jsx("span",{style:{width:"10px",height:"10px",backgroundColor:r,marginRight:"4px",border:"1px solid #444",display:"inline-block"}})," ",t," ",n.length>0?`(${n.join(", ")})`:""," "]},e)})," "]})]}),Y&&a.jsx("div",{style:{position:"fixed",top:"120px",left:"10px",backgroundColor:"rgba(40,40,40,0.9)",color:"#E0E0E0",padding:"10px",borderRadius:"5px",zIndex:998,fontSize:"0.6em",fontFamily:"'Consolas', 'Courier New', monospace",maxHeight:"calc(100vh - 220px)",overflowY:"auto",width:"350px",border:"1px solid #666",boxSizing:"border-box",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:(0,a.jsxs)("pre",{style:{margin:0},children:[a.jsx("strong",{children:"Current GameState:"}),a.jsx("br",{}),JSON.stringify(ei,null,2)]})}),Y&&i&&a.jsx("div",{style:{position:"fixed",top:"120px",left:"370px",backgroundColor:"rgba(50,50,60,0.9)",color:"#E0E0E0",padding:"10px",borderRadius:"5px",zIndex:998,fontSize:"0.6em",fontFamily:"'Consolas', 'Courier New', monospace",maxHeight:"calc(100vh - 220px)",overflowY:"auto",width:"350px",border:"1px solid #666",boxSizing:"border-box",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:(0,a.jsxs)("pre",{style:{margin:0},children:[a.jsx("strong",{children:"Saved GameState (Session):"}),a.jsx("br",{}),JSON.stringify(i,null,2)]})}),Q&&(0,a.jsxs)("div",{style:{position:"fixed",bottom:"40px",left:"50%",transform:"translateX(-50%)",padding:"10px 20px",borderRadius:"5px",backgroundColor:"error"===Q.type?"rgba(220,53,69,0.9)":"rgba(40,167,69,0.9)",color:"white",zIndex:2e3,boxShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:[" ",Q.text," "]}),(0,a.jsxs)("div",{style:{position:"fixed",bottom:"8px",left:"8px",right:"8px",padding:"6px 10px",backgroundColor:"rgba(0,0,0,0.75)",color:"#DDD",textAlign:"center",zIndex:1e3,borderRadius:"4px",fontSize:"0.8em",fontFamily:"'Consolas', 'Courier New', monospace"},children:[" ",U," "]}),G&&!K&&!V&&(0,a.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"25px 35px",backgroundColor:"rgba(30, 30, 30, 0.97)",color:"white",textAlign:"center",zIndex:1001,borderRadius:"12px",border:"1px solid #444",boxShadow:"0 0 25px rgba(0,0,0,0.6)"},children:[" ",a.jsx("h2",{style:{fontSize:"1.8em",color:"#FF4136",margin:"0 0 12px 0"},children:"Game Over!"})," ",a.jsx("p",{style:{fontSize:"1em",margin:"0 0 18px 0"},children:U.startsWith("Game Over:")?U.substring(10):"Try again!"})," ",a.jsx("button",{onClick:()=>en(l),style:{padding:"10px 22px",fontSize:"1em",cursor:"pointer",backgroundColor:"#3498db",border:"none",borderRadius:"7px",color:"white",marginRight:"10px"},children:" Try Again "})," ",a.jsx("button",{onClick:e,style:{padding:"10px 22px",fontSize:"1em",cursor:"pointer",backgroundColor:"#555",border:"none",borderRadius:"7px",color:"white"},children:" Menu "})," "]}),V&&(0,a.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"25px 35px",backgroundColor:"rgba(200, 0, 0, 0.97)",color:"white",textAlign:"center",zIndex:1001,borderRadius:"12px",border:"1px solid #8B0000",boxShadow:"0 0 25px rgba(0,0,0,0.6)"},children:[" ",a.jsx("h2",{style:{fontSize:"2em",color:"#FFFFFF",margin:"0 0 12px 0"},children:"Time's Up!"})," ",a.jsx("h3",{style:{fontSize:"1.5em",color:"#FFD700",margin:"0 0 18px 0"},children:"YOU LOSE!"})," ",a.jsx("button",{onClick:()=>en(l),style:{padding:"10px 22px",fontSize:"1em",cursor:"pointer",backgroundColor:"#3498db",border:"none",borderRadius:"7px",color:"white",marginRight:"10px"},children:" Try Again "})," ",a.jsx("button",{onClick:e,style:{padding:"10px 22px",fontSize:"1em",cursor:"pointer",backgroundColor:"#555",border:"none",borderRadius:"7px",color:"white"},children:" Menu "})," "]}),K&&(0,a.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"25px 35px",backgroundColor:"rgba(30, 144, 30, 0.97)",color:"white",textAlign:"center",zIndex:1001,borderRadius:"12px",border:"1px solid #2E8B57",boxShadow:"0 0 25px rgba(0,0,0,0.6)"},children:[" ",a.jsx("h2",{style:{fontSize:"1.8em",color:"#90EE90",margin:"0 0 12px 0"},children:"You Win!"})," ",a.jsx("p",{style:{fontSize:"1em",margin:"0 0 18px 0"},children:"Congratulations on reaching the end!"})," ",a.jsx("button",{onClick:()=>en(l),style:{padding:"10px 22px",fontSize:"1em",cursor:"pointer",backgroundColor:"#3498db",border:"none",borderRadius:"7px",color:"white",marginRight:"10px"},children:" Play Again "})," ",a.jsx("button",{onClick:e,style:{padding:"10px 22px",fontSize:"1em",cursor:"pointer",backgroundColor:"#555",border:"none",borderRadius:"7px",color:"white"},children:" Menu "})," "]}),(0,a.jsxs)("div",{style:{marginTop:"0px",height:"100vh"},children:[" ",x.length>0&&a.jsx(m,{gridData:x,isFpsView:X,playerStartPos:y,startMarkerPos:f,endMarkerPos:v,gameId:u,currentGridIndices:A,visitedCellTrail:F})," "]})]})};!function(e){e.CLICK_TO_PLAY="clickToPlay",e.NOW_PLAYING="nowPlaying"}(i||(i={}));let x=()=>{let[e,t]=(0,n.useState)("clickToPlay"),[r,o]=(0,n.useState)(!1),[i,s]=(0,n.useState)(""),[l,d]=(0,n.useState)(null),[c,p]=(0,n.useState)(null),m=(0,n.useCallback)(()=>{t(e=>"clickToPlay"===e?"nowPlaying":"clickToPlay")},[]),x=async e=>{console.log(`Attempting to load game for player: ${e}`);try{await new Promise(e=>setTimeout(e,1e3));let t=localStorage.getItem(`gameState_${e}`);if(!t)return console.log("No saved game found for player:",e),null;{let r=JSON.parse(t);if(r.playerName===e)return r.visitedCellTrail=Array.isArray(r.visitedCellTrail)?r.visitedCellTrail:[],console.log("Game loaded successfully:",r),d(r),r;return console.warn(`Player name mismatch. Found data for '${r.playerName}', expected '${e}'.`),null}}catch(e){return console.error("Error loading game:",e),null}},g=(0,n.useCallback)(t=>{if("Space"===t.code){if(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA")return;let r=document.getElementById("player-sphere"),o=document.getElementById("camera-rig"),i=document.getElementById("fps-camera"),a=r?.components?.["arrow-controls"]?.data.enabled??"nowPlaying"===e,n=o?.components?.["camera-controls"]?.data.enabled??"nowPlaying"===e,s=i?.components?.["look-controls"]?.data.enabled??!1;"clickToPlay"===e?(t.preventDefault(),m()):"nowPlaying"!==e||a&&n&&(!s||!document.pointerLockElement)&&(s||document.pointerLockElement)||s&&document.pointerLockElement||(t.preventDefault(),m())}},[m,e]);return(0,n.useEffect)(()=>(window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)),[g]),(0,n.useEffect)(()=>(!window.AFRAME||(window.AFRAME.components["arrow-controls"]&&window.AFRAME.components["camera-controls"]||(()=>{if(!window.AFRAME){console.error("AFRAME global not found, cannot register components.");return}window.AFRAME.components["arrow-controls"]||window.AFRAME.registerComponent("arrow-controls",{schema:{speed:{default:2.8},enabled:{default:!0}},init:function(){console.error("THREE.js not available for arrow-controls init"),this.velocity={set:()=>{},add:()=>{},sub:()=>{},normalize:()=>({multiplyScalar:()=>{}}),lengthSq:()=>0},this.worldUp={x:0,y:1,z:0},this.forwardVector={x:0,y:0,z:0,copy:()=>this.forwardVector,applyAxisAngle:()=>this.forwardVector,normalize:()=>this.forwardVector},this.rightVector={x:0,y:0,z:0,copy:()=>this.rightVector,applyAxisAngle:()=>this.rightVector},this.keys={},this.lastBirdseyeMove="up",this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},remove:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onKeyDown:function(e){this.data.enabled&&(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.code)&&(this.el.sceneEl&&this.el.sceneEl.isPlaying&&this.data.enabled&&e.preventDefault(),"true"!==this.el.getAttribute("data-fps-view-active")&&("ArrowUp"===e.code?this.el.setAttribute("data-last-birds-eye-move","up"):"ArrowDown"===e.code?this.el.setAttribute("data-last-birds-eye-move","down"):"ArrowLeft"===e.code?this.el.setAttribute("data-last-birds-eye-move","left"):"ArrowRight"===e.code&&this.el.setAttribute("data-last-birds-eye-move","right"))),this.keys[e.code]=!0)},onKeyUp:function(e){this.data.enabled&&(this.keys[e.code]=!1)},tick:function(e,t){if(!this.data.enabled||!this.el.sceneEl||!this.el.sceneEl.hasLoaded||!window.THREE||!this.velocity){this.el.components["kinematic-body"]&&this.el.setAttribute("kinematic-body","velocity",{x:0,y:0,z:0});return}let r=t/1e3,o=this.data.speed;if(this.velocity.set(0,0,0),"true"===this.el.getAttribute("data-fps-view-active")){let e=document.getElementById("fps-camera");e&&e.object3D&&(e.object3D.getWorldDirection(this.forwardVector),this.forwardVector.y=0,this.forwardVector.normalize(),this.rightVector.copy(this.forwardVector).applyAxisAngle(this.worldUp,-Math.PI/2),this.keys.ArrowUp&&this.velocity.sub(this.forwardVector),this.keys.ArrowDown&&this.velocity.add(this.forwardVector),this.keys.ArrowLeft&&this.velocity.add(this.rightVector),this.keys.ArrowRight&&this.velocity.sub(this.rightVector))}else this.keys.ArrowUp&&(this.velocity.z-=1),this.keys.ArrowDown&&(this.velocity.z+=1),this.keys.ArrowLeft&&(this.velocity.x-=1),this.keys.ArrowRight&&(this.velocity.x+=1);this.velocity.lengthSq()>0&&this.velocity.normalize().multiplyScalar(o);let i=this.el.getAttribute("position"),a=.85*(this.el.getAttribute("radius")||.35),n=12-a,s=-12+a,l=i.x+this.velocity.x*r,d=i.z+this.velocity.z*r,c=this.velocity.x,p=this.velocity.z;if((this.velocity.x>0&&l>n||this.velocity.x<0&&l<s)&&(c=0),(this.velocity.z>0&&d>n||this.velocity.z<0&&d<s)&&(p=0),this.el.components["kinematic-body"])this.el.setAttribute("kinematic-body","velocity",{x:c,y:0,z:p});else{let e=Math.max(s,Math.min(n,l)),t=Math.max(s,Math.min(n,d));this.el.setAttribute("position",{x:e,y:i.y,z:t})}}}),window.AFRAME.components["camera-controls"]||window.AFRAME.registerComponent("camera-controls",{schema:{panSpeed:{default:5},zoomSpeed:{default:8},minZoom:{default:7.5},maxZoom:{default:37.5},enabled:{default:!0}},init:function(){console.error("THREE.js not available for camera-controls init"),this.panVector={set:()=>{},normalize:()=>({multiplyScalar:()=>{}}),lengthSq:()=>0,add:()=>{}},this.keys={},this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},remove:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onKeyDown:function(e){this.data.enabled&&(["KeyW","KeyA","KeyS","KeyD","KeyZ","KeyX"].includes(e.code)&&this.el.sceneEl&&this.el.sceneEl.isPlaying&&this.data.enabled&&e.preventDefault(),this.keys[e.code]=!0)},onKeyUp:function(e){this.data.enabled&&(this.keys[e.code]=!1)},tick:function(e,t){if(!this.data.enabled||!this.el.sceneEl||!this.el.sceneEl.hasLoaded||!this.panVector||!window.THREE)return;let r=t/1e3,o=this.data.panSpeed,i=this.data.zoomSpeed,a=this.el.object3D.position;this.panVector.set(0,0,0),this.keys.KeyW&&(this.panVector.z-=1),this.keys.KeyS&&(this.panVector.z+=1),this.keys.KeyA&&(this.panVector.x-=1),this.keys.KeyD&&(this.panVector.x+=1),this.panVector.lengthSq()>0&&(this.panVector.normalize().multiplyScalar(o*r),this.el.object3D.position.add(this.panVector));let n=a.y;this.keys.KeyZ&&(n-=i*r),this.keys.KeyX&&(n+=i*r),n=Math.max(this.data.minZoom,Math.min(this.data.maxZoom,n)),this.el.object3D.position.y=n}}),window.AFRAME.components["arrow-controls"]&&window.AFRAME.components["camera-controls"]&&console.log("Custom A-Frame components registered/verified.")})(),window.AFRAME.extras&&window.AFRAME.components["event-set"]&&window.AFRAME.components["arrow-controls"]&&window.AFRAME.components["camera-controls"]?r||o(!0):r||setTimeout(()=>{window.AFRAME.components["arrow-controls"]&&window.AFRAME.components["camera-controls"]?r||(o(!0),console.log("Scripts marked ready (fallback).")):console.error("Fallback check: Custom components not registered.")},1e3)),()=>{window.removeEventListener("keydown",g)}),[g,r]),(0,a.jsxs)("div",{className:"AppContainer",style:{margin:0,padding:0,width:"100vw",height:"100vh",userSelect:"none"},children:[" ","nowPlaying"===e?r?a.jsx(h,{onToggleScreen:m,playerName:i,loadedGameState:l,clearLoadedGameState:()=>{d(null)},savedGameStateFromApp:c,onSetSavedGameState:e=>{p(e)}}):a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#1A1A1A",color:"white",fontFamily:"'Segoe UI', sans-serif"},children:" Loading Grid Runner Experience... Please Wait. "}):a.jsx(u,{onToggleScreen:m,playerName:i,onPlayerNameChange:e=>{s(e)},onLoadGame:x})," "]})}},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>i});var o=r(9510);let i={title:"Hire Brent",description:"Hire Brent"};function a({children:e}){return o.jsx("html",{lang:"en",children:o.jsx("body",{children:e})})}},908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>s});var o=r(8570);let i=(0,o.createProxy)(String.raw`C:\Users\astir\Projects\Grid50x50app\gridGameDockerApp\app\page.tsx`),{__esModule:a,$$typeof:n}=i;i.default;let s=(0,o.createProxy)(String.raw`C:\Users\astir\Projects\Grid50x50app\gridGameDockerApp\app\page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[819],()=>r(3753));module.exports=o})();